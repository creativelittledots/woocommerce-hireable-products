jQuery(document).ready(function($){if("undefined"==typeof wc_hp_params)return!1;$.blockUI.defaults.overlayCSS.cursor="default";var hireDates={start_date:null,end_date:null},price=wc_hp_params.price,formula=wc_hp_params.formula;function getDates(e,t){for(var a=new Array,r=e;r<=t;)a.push(new Date(r)),r=r.addDays(1);return a}function setSelectedDates(){if(hireDates.start_date&&hireDates.end_date){var dates=getDates(hireDates.start_date,hireDates.end_date),days=1+(parseInt(hireDates.end_date.getTime())-parseInt(hireDates.start_date.getTime()))/864e5,total=formula&&-1<formula.indexOf("{p}")?eval(formula.replaceAll("{n}",days).replaceAll("{p}",price)):days*price;for(d in $(".js-datepicker-container td.is-selected").removeClass("is-selected"),dates){var date=dates[d],y=date.getFullYear(),m=date.getMonth(),d=date.getDate();$('.js-datepicker-container .pika-button.pika-day[data-pika-year="'+y+'"][data-pika-month="'+m+'"][data-pika-day="'+d+'"]').parent().addClass("is-selected")}$(".js-hireable-price").text(total.formatMoney()),$(".js-hireable-product-price-container").show(),$(".js-hireable-product-add-to-cart-button").removeClass("disabled").removeAttr("disabled"),$(".js-hireable-product-price-from-container").hide()}else $(".js-hireable-product-price-container").hide(),$(".js-hireable-product-add-to-cart-button").addClass("disabled").attr("disabled","disabled"),$(".js-hireable-product-price-from-container").show()}Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t},Number.prototype.formatMoney=function(e,t,a){var r=this,d=(e=isNaN(e=Math.abs(e))?2:e,t=null==t?".":t,a=null==a?",":a,r<0?"-":""),i=parseInt(r=Math.abs(+r||0).toFixed(e))+"",s=3<(s=i.length)?s%3:0;return d+(s?i.substr(0,s)+a:"")+i.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+a)+(e?t+Math.abs(r-i).toFixed(e).slice(2):"")},String.prototype.replaceAll=function(e,t){return this.split(e).join(t)};var picker=new Pikaday({field:document.querySelector(".js-datepicker"),firstDay:1,minDate:new Date,yearRange:[2e3,2020],bound:!1,container:document.querySelector(".js-datepicker-container"),onDraw:setSelectedDates,onSelect:function(e){hireDates.start_date&&e>hireDates.start_date&&hireDates.start_date==hireDates.end_date||(hireDates.start_date=e),hireDates.end_date=e,setSelectedDates()}});$(".js-datepicker-toggle").click(function(e){e.preventDefault(),$(".js-datepicker-wrapper").slideToggle(),$(this).toggleClass("closed")}),$(".js-hireable-product-add-to-cart-button").click(function(e){if(e.preventDefault(),$(this).attr("disabled")||!hireDates.start_date||!hireDates.end_date)return!1;var t=wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart"),a={product_id:$(this).data("product_id"),hireable_dates:hireDates},d=$(this).eq(0),r=$(this).closest(".js-hireable-product-container");r.block({message:null,overlayCSS:{opacity:.6}}),$(document.body).trigger("adding_to_cart",[d,a]),$.post(t,a,function(e){if(e){var t=window.location.toString();if(t=t.replace("add-to-cart","added-to-cart"),e.error&&e.product_url)window.location=e.product_url;else if("yes"!==wc_add_to_cart_params.cart_redirect_after_add){var a=e.fragments,r=e.cart_hash;a&&$.each(a,function(e){$(e).addClass("updating")}),a&&$.each(a,function(e,t){$(e).replaceWith(t)}),$(document.body).trigger("added_to_cart",[a,r,d])}else window.location=wc_add_to_cart_params.cart_url}},"json").always(function(e){r.unblock()})})});